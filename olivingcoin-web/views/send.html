<!DOCTYPE HTML>
<!--
	Halcyonic by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    <title> Olivingcoin-send </title>
    <link rel="stylesheet" href="public/css/main.css" />
    <script type='text/javascript' src='./script/rpc/send_rpc.js'></script>
    <script type='text/javascript' src='./script/pagefunction/sendfunction.js'></script>
    <script>
        function inNumber() {
            if (event.keyCode < 48 || event.keyCode > 57) {
                event.returnValue = false;
            }
        }
/*
        const addEvent = (() => {
            const table = document.getElementById("sendTable");

            for (let i = 0; i < table.tBodies[0].rows.length; i++) {
                console.log(table.tBodies[0])
                const tr = document.getElementById("tx" + i);
                const txid = document.getElementById("txid" + i).textContent;
                console.log(tr)
                console.log(txid)

                tr.setAttribute(`ondblclick`, `getTransaction('${text[i].txid}')`)
                tr.setAttribute(`onclick`, `clickTxEvent(this)`)
                //tr.addEventListener('dblclick', getTransaction(txid));
                //tr.addEventListener('click', clickTxEvent(tr));

            }
        })*/

        const convertFloat = ((obj) => {
            const convertNumber = parseFloat(obj.value).toFixed(8);
            obj.value = convertNumber;
        });

        getcurrentBalance();
    </script>
    <style>
        .container {
            font-weight: bolder;
        }

        table {
            width: 100%;
            text-align: center;
            word-break: break-all;
        }
    </style>
</head>

<body class="main">
    {% set DEFAULT_COIN_UNIT = 'OVC' %}
    <div id="page-wrapper">
        <!-- Header -->
        <section id="header">
            {% include "menu.html" %}
        </section>

        <!-- Content -->
        <section id="content">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-12-medium">

                        <!-- Sidebar -->
                        <section>
                            <header>
                                <h2> 송금 설정</h2>
                            </header>

                            <body>
                                <div id="currentBalance"></div>
                                <div id="currentTxFee"></div>
                                <table id="sendSettingTable">
                                    <tbody>
                                        <tr>
                                            <td>수수료 설정</td>
                                            <td style="width: 70%;"><input id="setTxFee" value="0.00001000" type="number" min='0.00001000' step="1e-5" onchange="convertFloat(this)" style="width: 100%;"></input></td>
                                            <td><button id="sendButton" onclick="feeButtonEvent()"> 수수료 설정 </button></td>
                                        </tr>
                                        <tr>
                                            <td>송금할 대상</td>
                                            <td style="width: 70%;"><input id="sendAddress" style="width: 100%;"></input></td>
                                        </tr>
                                        <tr>
                                            <td>금액</td>
                                            <td style="width: 70%; text-align: left;"><input id="sendValue" type='number' min='0.00100000' step="1e-8" onchange="convertFloat(this)" style="width: 90%;"></input> {{DEFAULT_COIN_UNIT}}</td>
                                            <td><button id="sendAllBalance" onclick="sendAllBalance()"> 잔액 전부 사용하기 </button></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <button id="sendButton" onclick="sendButtonEvent()"> 보내기 </button>

                            </body>
                        </section>
                        <section>
                            <header>
                                <h2> 송금 트랜잭션 조회</h2>
                            </header>

                            <body>
                                <div id="countTx"></div>
                                <table id="sendTable">
                                    <thead>
                                        <th>날짜</th>
                                        <th>발신주소</th>
                                        <th>금액</th>
                                        <th>검증횟수</th>
                                        <th>트랜잭션 아이디</th>
                                    </thead>
                                    <tbody id="tbody">
                                        <script>
                                            setTxFee(document.getElementById('setTxFee').value);
                                            getListSendTransactions('*', MAX_RPC_INTEGER);
                                            //setInterval(getListTransactions(document.getElementById('arg2').value), 1000);
                                            //arg2.onchange = (() => {
                                                //getListTransactions(document.getElementById('arg2').value)
                                                //});
                                        </script>
                                    </tbody>
                                </table>
                            </body>
                        </section>
                    </div>
                </div>
            </div>
        </section>



        <!-- Footer -->


        <!-- Copyright -->
        <div id="copyright">
            &copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
        </div>

    </div>

    <!-- Scripts -->
    <script src="public/js/jquery.min.js"></script>
    <script src="public/js/browser.min.js"></script>
    <script src="public/js/breakpoints.min.js"></script>
    <script src="public/js/util.js"></script>
    <script src="public/js/main.js"></script>
</body>

</html>